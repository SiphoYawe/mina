@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Reown/AppKit Font Override - must be defined at root level */
  --w3m-font-family: Inter, system-ui, -apple-system, sans-serif;

  /* Background Colors */
  --bg-base: #09090B;
  --bg-surface: #111113;
  --bg-elevated: #18181B;

  /* Border Colors */
  --border-subtle: #27272A;
  --border-default: #3F3F46;

  /* Accent Colors */
  --accent-primary: #7DD3FC;
  --accent-hover: #93C5FD;
  --accent-glow: rgba(125, 211, 252, 0.15);
  --accent-muted: #0EA5E9;

  /* Text Colors */
  --text-primary: #FAFAFA;
  --text-secondary: #A1A1AA;
  --text-muted: #71717A;

  /* Semantic Colors */
  --success: #0ECC83;
  --warning: #FBBF24;
  --error: #F87171;
  --info: #60A5FA;

  /* Animation Durations */
  --duration-micro: 150ms;
  --duration-standard: 300ms;
  --duration-emphasis: 500ms;

  /* Border Radius */
  --radius: 12px;
}

@layer base {
  * {
    @apply border-border-subtle;
  }

  /* MOBILE-002 Fix: Ensure proper scrolling and touch handling on mobile */
  html {
    overflow-x: hidden;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  body {
    @apply bg-bg-base text-text-primary antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
    /* MOBILE-002 Fix: Ensure body allows scrolling and has safe-area support */
    overflow-x: hidden;
    overflow-y: auto;
    min-height: 100vh;
    min-height: 100dvh; /* Dynamic viewport height for mobile browsers */
    padding-bottom: env(safe-area-inset-bottom);
    /* MOBILE-003 Fix: Enable touch manipulation for better scroll performance */
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Typography */
  h1 {
    @apply text-h1 text-text-primary;
  }

  h2 {
    @apply text-h2 text-text-primary;
  }

  h3 {
    @apply text-h3 text-text-primary;
  }

  p {
    @apply text-body text-text-secondary;
  }

  /* Focus styles */
  *:focus-visible {
    @apply outline-none ring-2 ring-accent-primary ring-offset-2 ring-offset-bg-base;
  }
}

@layer utilities {
  /* MOBILE-004 Fix: Safe area utilities for notched devices */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }

  /* MOBILE-005 Fix: Minimum touch target size for mobile accessibility */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Glow effects */
  .glow {
    box-shadow: 0 0 20px var(--accent-glow);
  }

  .glow-lg {
    box-shadow: 0 0 40px rgba(125, 211, 252, 0.2);
  }

  /* Glass effect */
  .glass {
    @apply bg-bg-surface/80 backdrop-blur-xl;
  }

  /* Gradient text */
  .text-gradient {
    @apply bg-gradient-to-r from-accent-primary to-accent-hover bg-clip-text text-transparent;
  }

  /* Vertical gradient text - fades from top to bottom */
  .text-gradient-vertical {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(to bottom, var(--accent-primary) 0%, var(--accent-primary) 40%, rgba(125, 211, 252, 0.4) 100%);
  }

  /* Hide scrollbar */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Dropdown animations */
  .animate-in {
    animation: animate-in 200ms ease-out;
  }

  .fade-in {
    animation: fade-in 200ms ease-out;
  }

  .slide-in-from-top-2 {
    animation: slide-in-from-top 200ms ease-out;
  }

  @keyframes animate-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slide-in-from-top {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Bridge portal particle animation */
  @keyframes bridge-particle {
    0%, 100% {
      opacity: 0;
      transform: translateX(0) scale(0.5);
    }
    20% {
      opacity: 1;
      transform: translateX(10px) scale(1);
    }
    80% {
      opacity: 0.6;
      transform: translateX(40px) scale(0.8);
    }
  }

  /* Success pulse glow animation */
  @keyframes success-glow {
    0%, 100% {
      box-shadow: 0 0 20px rgba(14, 204, 131, 0.3);
    }
    50% {
      box-shadow: 0 0 35px rgba(14, 204, 131, 0.5);
    }
  }

  .animate-success-glow {
    animation: success-glow 2s ease-in-out infinite;
  }
}

/* Confetti Canvas - ensure it doesn't block interactions */
/* canvas-confetti library creates canvases with this specific class */
canvas.confetti-canvas {
  pointer-events: none !important;
  z-index: 9999;
}

/* INPUT-001 Fix: Hide number input spinners/arrows for cleaner design */
/* Chrome, Safari, Edge, Opera */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Firefox */
input[type="number"] {
  -moz-appearance: textfield;
  appearance: textfield;
}

/* Reown/AppKit Modal - Force consistent font family */
/* Some internal elements don't inherit --w3m-font-family correctly */
w3m-modal,
w3m-modal *,
w3m-button,
w3m-button *,
w3m-connect-button,
w3m-connect-button *,
w3m-account-button,
w3m-account-button *,
w3m-network-button,
w3m-network-button *,
[class*="w3m-"],
[class*="wui-"] {
  font-family: Inter, system-ui, -apple-system, sans-serif !important;
}

/* Target shadow DOM host elements */
:host,
:host * {
  font-family: Inter, system-ui, -apple-system, sans-serif !important;
}
